@using Kendo.Mvc.UI
@using System.Globalization
@{
    ViewData["Title"] = "Ø¬Ø²Ø¦ÛŒØ§Øª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø«Ø§Ù†ÙˆÛŒÙ‡";
    Layout = "_Layout";
}

<link href="~/fonts/fontawesome-free-7.1.0-web/css/all.min.css" rel="stylesheet" />

<style>
    body { background-color: #f8f9fa; }
    .card { border: none; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    .card-header { border-radius: 12px 12px 0 0; border: none; }
    .gradient-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
    .btn-back { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white; padding: 10px 20px; border-radius: 6px; }
    .btn-back:hover { background: linear-gradient(135deg, #764ba2 0%, #667eea 100%); color: white; text-decoration: none; }
</style>

<div class="container-fluid mt-4" dir="rtl">
    <!-- Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card gradient-header">
                <div class="card-body text-center py-5">
                    <h1 class="mb-2"><i class="fas fa-list me-3"></i>Ø¬Ø²Ø¦ÛŒØ§Øª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø«Ø§Ù†ÙˆÛŒÙ‡</h1>
                    <p class="mb-0">ØªØ§Ø±ÛŒØ®: <strong>@ViewBag.Date</strong></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Ø¯Ú©Ù…Ù‡ Ø¨Ø§Ø²Ú¯Ø´Øª -->
    <div class="row mb-4">
        <div class="col-12">
            <a href="@Url.Action("SecondaryList", "SMT")" class="btn btn-back">
                <i class="fas fa-arrow-right me-2"></i>Ø¨Ø§Ø²Ú¯Ø´Øª
            </a>
        </div>
    </div>

    <!-- Grid Ø¬Ø²Ø¦ÛŒØ§Øª -->
    <div class="card">
        <div class="card-header bg-light">
            <h5 class="mb-0"><i class="fas fa-barcode me-2 text-primary"></i>Ø¨Ø§Ø±Ú©Ø¯Ù‡Ø§ÛŒ Ø§Ø³Ú©Ù† Ø´Ø¯Ù‡</h5>
        </div>
        <div class="card-body p-0">
            <div class="k-rtl" style="overflow-x:auto;width:100%;">
                @(
                    Html.Kendo().Grid<ERP.ViewModels.SMT.SMTSecondaryViewModel>()
                        .Name("gridSecondaryDetails")
                        .Columns(columns =>
                        {
                            columns.Bound(c => c.DataValue).Title("ðŸ“¦ Ø¨Ø§Ø±Ú©Ø¯").Width(150);
                            columns.Bound(c => c.DateCreate).Title("ðŸ“… ØªØ§Ø±ÛŒØ® Ø§ÙˆÙ„ÛŒÙ‡").Width(150);
                            columns.Bound(c => c.Username).Title("ðŸ‘¤ Ú©Ø§Ø±Ø¨Ø±").Width(130);
                            columns.Bound(c => c.CreatedAt).Title("â° Ø«Ø¨Øª Ø´Ø¯Ù‡").Width(180);
                        })
                        .Pageable(p => p
                            .PageSizes(new[] { 10, 20, 50 })
                            .Refresh(true)
                            .ButtonCount(5)
                            .Messages(m => m
                                .Display("Ù†Ù…Ø§ÛŒØ´ {0} - {1} Ø§Ø² {2}")
                                .Empty("Ù‡ÛŒÚ† Ø±Ú©ÙˆØ±Ø¯ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯")))
                        .Sortable()
                        .Filterable()
                        .Scrollable(s => s.Height("auto"))
                        .Resizable(r => r.Columns(true))
                        .DataSource(ds => ds
                            .Ajax()
                            .PageSize(20)
                            .ServerOperation(true)
                            .Read(read => read
                                .Action("SMTSecondaryByDate_Read", "SMT")
                                .Data("getDateFilter"))
                            .Model(m => m.Id(p => p.Id))
                        )
                )
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function getDateFilter() {
            return { date: '@ViewBag.Date' };
        }
    </script>
}
